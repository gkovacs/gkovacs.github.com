<!DOCTYPE html>
<html style="margin: 0; padding: 0; border: 0; overflow: hidden; width: 100%; height: 100%">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<script>
if (window.location.protocol == 'http:' && window.location.host == 'www.gkovacs.com') {
  window.location.protocol = 'https:';
}
</script>
<style>
* {
  padding: 0;
  margin: 0;
  list-style: none;
  box-sizing: border-box;
  outline: none;
  font-weight: normal;
  font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;'
}

.tabs {
  background: #fff;
  position: relative;
}

.tabs > input,
.tabs > span {
  width: 33%;
  height: 35px;
  line-height: 35px;
  position: absolute;
  top: 0;
}

.tabs > input {
  cursor: pointer;
  filter: alpha(opacity=0);
  opacity: 0;
  position: absolute;
  z-index: 99;
}

.tabs > span {
  background: #f0f0f0;
  text-align: center;
  overflow: hidden;
}

.tabs > span i,
.tabs > span {
  -webkit-transition: all .5s;
     -moz-transition: all .5s;
     -o-transition: all .5s;
      transition: all .5s;
}

.tabs > input:hover + span {
  background: rgba(255,255,255,.1);
}

.tabs > input:checked + span {
  background: #fff;
  font-weight: bold;
}

.tabs > input:checked + span,
.tabs > input:hover + span {
  color: #3498DB;
}

#tab-1, #tab-1 + span {
  left: 0;
}

#tab-2, #tab-2 + span {
  left: 33%;
}

#tab-3, #tab-3 + span {
  right: 0%;
  width: 34%;
}

.tab-content {
  padding: 35px 0px 0px;
  width: 100%;
  min-height: 340px;
}

.tab-content section {
  width: 100%;
  display: none;
}

.tab-content section h1 {
  margin-top: 15px;
  font-size: 100px;
  font-weight: 100;
  text-align: center;
}

#tab-1:checked ~ .tab-content #tab-item-1  {
  display: block;
}

#tab-2:checked ~ .tab-content #tab-item-2  {
  display: block;
}

#tab-3:checked ~ .tab-content #tab-item-3  {
  display: block;
}

#tab-4:checked ~ .tab-content #tab-item-4  {
  display: block;
}

#tab-5:checked ~ .tab-content #tab-item-5  {
  display: block;
}

.scroll-wrapper {
  -webkit-overflow-scrolling: touch;
  overflow-y: scroll;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  border: 0;
  overflow: hidden;
  /* important:  dimensions or positioning here! */
}

.scroll-wrapper iframe {
  /* nada! */
}


</style>
</head>
<body style="margin: 0; padding: 0; border: 0; overflow: hidden; width: 100%; height: 100%">

<div class="tabs effect-1">
  <!-- tab-title -->
  <input type="radio" id="tab-1" name="tab" onclick="set_page('full')">
  <span href="#tab-item-1">Full Schedule</span>

  <input type="radio" id="tab-2" name="tab" onclick="set_page('meal')">
  <span href="#tab-item-2">Meal Schedule</span>

  <input type="radio" id="tab-3" name="tab" onclick="set_page('appointment')">
  <span href="#tab-item-3" style="width: 34%">Appointments</span>

  <!-- tab-content -->
  <div class="tab-content">
    <section id="tab-item-1">
      <div style='z-index: 999999999; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; font-size: 16px; line-height: 30px; font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;'>
        <span style="background-color: #BC6D19; border-color: #BC6D19; border-style: solid; border-width: 1px; padding: 5px; border-radius: 5px; color: white; white-space: nowrap; cursor: pointer" onclick="toggle_full(this, 'meals')">Meals</span>
        <span style="background-color: #681527; border-color: #681527; border-style: solid; border-width: 1px; padding: 5px; border-radius: 5px; color: white; white-space: nowrap; cursor: pointer" onclick="toggle_full(this, 'hipri')">Important</span>
        <span style="background-color: #5DBFB3; border-color: #5DBFB3; border-style: solid; border-width: 1px; padding: 5px; border-radius: 5px; color: white; white-space: nowrap; cursor: pointer" onclick="toggle_full(this, 'medpri')">Mid Priority</span>
        <span style="background-color: #23184D; border-color: #23184D; border-style: solid; border-width: 1px; padding: 5px; border-radius: 5px; color: white; white-space: nowrap; cursor: pointer" onclick="toggle_full(this, 'lopri')">Ditchable</span>
        <span style="white-space: nowrap">Ignore Full-Day Events.</span>
        <span style="white-space: nowrap"><a href="#apppointment" onclick="make_appointment()">Make Appointment</a></span>
      </div>
      <div class="scroll-wrapper">
        <iframe id="iframe_full" width="100%" height="100%" style="width: 100%; height: 100%; margin: 0; padding: 0; border: 0"></iframe>
      </div>
    </section>
    <section id="tab-item-2">
      <div style='z-index: 999999999; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; font-size: 16px; line-height: 30px; font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;'>
        <span style="background-color: #134B38; border-color: #134B38; border-style: solid; border-width: 1px; padding: 5px; border-radius: 5px; color: white; white-space: nowrap; cursor: pointer" onclick="toggle_meal(this, 'available')">Available</span>
        <span style="background-color: #BC6D19; border-color: #BC6D19; border-style: solid; border-width: 1px; padding: 5px; border-radius: 5px; color: white; white-space: nowrap; cursor: pointer" onclick="toggle_meal(this, 'meals')">Unavailable</span>
        <span style="white-space: nowrap">See <a href="#full" onclick="full_schedule()">Full Schedule</a>.</span>
        <span style="white-space: nowrap"><a href="#apppointment" onclick="make_appointment()">Make Appointment</a></span>
      </div>
      <div class="scroll-wrapper">
        <iframe id="iframe_meal" width="100%" height="100%" style="width: 100%; height: 100%; margin: 0; padding: 0; border: 0"></iframe>
      </div>
    </section>
    <section id="tab-item-3">
      <div class="scroll-wrapper">
        <iframe id="iframe_appointment" width="100%" height="100%" style="width: 100%; height: 100%; margin: 0; padding: 0; border: 0"></iframe>
      </div>
    </section>
  </div>
</div>

<script>
  var is_mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)

  //var src_url_full = "https://www.google.com/calendar/embed?showTitle=0&mode=WEEK&showNav=1&showPrint=0&wkst=1&src=geza0kovacs%40gmail.com&color=%23691426&src=hqcqah533la58h15gsku2uhrc4%40group.calendar.google.com&color=%23BE6D00&src=moed0ihkgem3lbmflstqrs0afk%40group.calendar.google.com&color=%231B887A&src=5f5kiek12oo6hthfnim5ouie1o%40group.calendar.google.com&color=%2323164E&ctz=America%2FLos_Angeles"
  //var src_url_meal = "https://calendar.google.com/calendar/embed?showTitle=0&mode=WEEK&embed?showNav=1&showPrint=0&wkst=1&bgcolor=%23FFFFFF&src=t7trgt2buhpkb8tftsqnouq3kg%40group.calendar.google.com&color=%230F4B38&src=hqcqah533la58h15gsku2uhrc4%40group.calendar.google.com&color=%23BE6D00&ctz=America%2FLos_Angeles"
  var src_url_base = "https://www.google.com/calendar/embed?showTitle=0&mode=WEEK&showNav=1&showPrint=0&wkst=1"

  if (is_mobile) {
    src_url_base = src_url_base.split('mode=WEEK').join('mode=AGENDA')
  }

  var src_url_appointment = "https://calendly.com/geza/60min"

  var calendar_ids = {
    available: 't7trgt2buhpkb8tftsqnouq3kg@group.calendar.google.com',
    meals: "hqcqah533la58h15gsku2uhrc4@group.calendar.google.com",
    lopri: "5f5kiek12oo6hthfnim5ouie1o@group.calendar.google.com",
    medpri: "moed0ihkgem3lbmflstqrs0afk@group.calendar.google.com",
    hipri: "geza0kovacs@gmail.com"
  }

  var calendar_colors = {
    available: '0F4B38',
    meals: 'BE6D00',
    lopri: '23164E',
    medpri: '1B887A',
    hipri: '691426'
  }

  var shown_full = {
    meals: true,
    lopri: true,
    medpri: true,
    hipri: true
  }

  var shown_meal = {
    available: true,
    meals: true
  }

  function make_url_with_calendars(calendar_list) {
    if (calendar_list.length == 0) {
      return enable_one_calendar
    }
    var output = [src_url_base]
    for (var i = 0; i < calendar_list.length; ++i) {
      var calname = calendar_list[i]
      output.push('&src=' + calendar_ids[calname])
      output.push('&color=%23' + calendar_colors[calname])
    }
    return output.join('')
  }

  function get_enabled_calendars_full() {
    var all_calendars = ['meals', 'lopri', 'medpri', 'hipri']
    var output = []
    for (var i = 0; i < all_calendars.length; ++i) {
      var calname = all_calendars[i]
      if (shown_full[calname]) {
        output.push(calname)
      }
    }
    return output
  }

  function get_enabled_calendars_meal() {
    var all_calendars = ['available', 'meals']
    var output = []
    for (var i = 0; i < all_calendars.length; ++i) {
      var calname = all_calendars[i]
      if (shown_meal[calname]) {
        output.push(calname)
      }
    }
    return output
  }

  function set_page(page) {
    window.location.hash = page
    ensure_loaded(page)
  }

  function full_schedule() {
    document.getElementById('tab-1').checked = 'checked'
  }

  function meal_schedule() {
    document.getElementById('tab-2').checked = 'checked'
  }

  function make_appointment() {
    document.getElementById('tab-3').checked = 'checked'
  }

  var iframe_full = document.getElementById('iframe_full')
  var iframe_meal = document.getElementById('iframe_meal')
  var iframe_appointment = document.getElementById('iframe_appointment')

  var loading_src = 'data:text/html;base64,TG9hZGluZw=='
  var enable_one_calendar = 'data:text/html;base64,WW91IG11c3QgZW5hYmxlIGF0IGxlYXN0IG9uZSBjYWxlbmRhcg=='

  iframe_full.src = iframe_meal.src = iframe_appointment.src = loading_src

  var src_url_full;
  var src_url_meal;

  function generate_src_url_full() {
    src_url_full = make_url_with_calendars(get_enabled_calendars_full())
  }

  function generate_src_url_meal() {
    src_url_meal = make_url_with_calendars(get_enabled_calendars_meal())
  }

  generate_src_url_full()
  generate_src_url_meal()

  function toggle_full(button, calname) {
    shown_full[calname] = !shown_full[calname]
    generate_src_url_full()
    iframe_full.src = src_url_full
    if (!shown_full[calname]) {
      button.style.backgroundColor = 'white'
      button.style.color = 'black'
    } else {
      button.style.backgroundColor = '#' + calendar_colors[calname]
      button.style.color = 'white'
    }
  }

  function toggle_meal(button, calname) {
    shown_meal[calname] = !shown_meal[calname]
    generate_src_url_meal()
    iframe_meal.src = src_url_meal
    if (!shown_meal[calname]) {
      button.style.backgroundColor = 'white'
      button.style.color = 'black'
    } else {
      button.style.backgroundColor = '#' + calendar_colors[calname]
      button.style.color = 'white'
    }
  }

  function ensure_loaded(page) {
    if (page == 'meal') {
      if (iframe_meal.src !== src_url_meal) {
        iframe_meal.src = src_url_meal
      }
    } else if (page == 'appointment') {
      if (iframe_appointment.src !== src_url_appointment) {
        iframe_appointment.src = src_url_appointment
      }
    } else {
      if (iframe_full.src !== src_url_full) {
        iframe_full.src = src_url_full
      }
    }
  }

  function ensure_loaded_after(page, msecs) {
    setTimeout(function() {
      ensure_loaded(page)
    }, msecs)
  }

  var loc_hash = window.location.hash
  if (loc_hash && loc_hash[0] == '#') {
    loc_hash = loc_hash.substr(1)
  } else {
    window.location.hash = 'full'
  }
  if (loc_hash == 'meal') {
    document.getElementById('tab-2').checked = 'checked'
    iframe_meal.src = src_url_meal
    ensure_loaded_after('full', 4000)
    ensure_loaded_after('appointment', 8000)
  } else if (loc_hash == 'appointment') {
    document.getElementById('tab-3').checked = 'checked'
    iframe_appointment.src = src_url_appointment
    ensure_loaded_after('full', 4000)
    ensure_loaded_after('meal', 8000)
  } else {
    document.getElementById('tab-1').checked = 'checked'
    iframe_full.src = src_url_full
    ensure_loaded_after('appointment', 4000)
    ensure_loaded_after('meal', 8000)
  }

  function resized() {
    var iframe_full_position = iframe_full.getBoundingClientRect().top;
    iframe_full.height = (document.body.clientHeight - iframe_full_position) + 'px';
    iframe_full.style.height = (document.body.clientHeight - iframe_full_position) + 'px';

    var iframe_meal_position = iframe_meal.getBoundingClientRect().top;
    iframe_meal.height = (document.body.clientHeight - iframe_meal_position) + 'px';
    iframe_meal.style.height = (document.body.clientHeight - iframe_meal_position) + 'px';

    var iframe_appointment_position = iframe_appointment.getBoundingClientRect().top;
    iframe_appointment.height = (document.body.clientHeight - iframe_appointment_position) + 'px';
    iframe_appointment.style.height = (document.body.clientHeight - iframe_appointment_position) + 'px';
  }
  window.addEventListener('resize', resized, true);
  resized();
</script>
</body>
</html>
